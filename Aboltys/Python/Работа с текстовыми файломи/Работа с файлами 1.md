
1. Открытие и закрытие файлов
2. Указание кодировки
3. Чтение данных из файла

### Открытие файла

Для открытия файлов в Python существует функция `open()`. Она создает файловый объект и связывает его с файлом на диске. Общий формат применения функции `open()`:
```python
файловая_переменная = open(имя_файла, режим_доступа)
student_file = open('students.txt', 'r')
student_file = open('students.txt') # по умолчанию режим доступа для чтения ('r')
```
- `файловая переменная` – имя переменной, которая ссылается на файловый объект;
- `имя_файла` – строковый литерал, задающий имя файла;
- `режим_доступа` – строковый литерал, задающий режим доступа (чтение, запись, и т.д.), в котором файл будет открыт.

### Указание места расположения файла

Если имя файла не содержит путь, то используется относительный путь, относительно папки, где находится исполняемая программа.

Если требуется открыть файл, расположенный в другом месте, нужно указать путь и имя файла в аргументе, передаваемом в функцию `open()`.
```python
test_file = open('C:\\Users\\temp\\test.txt', 'w')
```
Обратите внимание: символ `\` является специальным символом в Python и его нужно экранировать (`\\`), чтобы интерпретатор Python рассматривал обратную косую черту как обычный символ.

Вместо экранирования символов можно использовать сырые строки (raw strings). Для этого следует снабдить строковый литерал префиксом в виде буквы `r`.
```python
test_file = open(r'C:\Users\temp\test.txt', 'w')
```
Механизм сырых строк очень удобен не только при работе с файлами.
```python
path = 'C:\new\text.txt' 
print(path)
>>> C: 
>>> ew ext.txt
```
поскольку символы `\n` и `\t` интерпретируются как перенос строки и табуляция.
```python
path = r'C:\new\text.txt' 
print(path)
>>> C:\new\text.txt
```
Чтобы сделать работу с файлами универсальнее, в путях файлов в Windows в Python-программах рекомендуется ставить прямой слеш (`/`). В наших примерах мы так и будем делать:
```python
file1 = open(r'C:/Users/temp/test.txt') # используем прямой слеш / (абсолютный путь)
file2 = open(r'temp/data.txt') # используем прямой слеш / (относительный путь)
```
### Кодировка
При работе с текстом на русском языке нужно указать кодировку, для этого служит параметр `encoding`
```python
file = open('info.txt', 'r', encoding='utf-8')
```
Чтобы получить кодировку открытого файла, используют файловое свойство `encoding`.
```python
file1 = open('students.txt', 'w') 
file2 = open('customers.txt', 'w', encoding='utf-8') 
print(file1.encoding) 
print(file2.encoding) 
file1.close() 
file2.close()
>>> cp1252 
>>> utf-8
```
### Закрытие файлов
После окончания работы с файлом его необходимо закрыть. Для этого есть несколько причин:
- если файл изменялся, это позволит корректно его сохранить;
- если открытый файл потребуется другим программам, ваша программа может его блокировать;
- не стоит держать в памяти лишние, уже не нужные, данные;
- удалить открытый кем-то файл проблематично.

Для закрытия файла используется файловый метод `close()`:
```python
file = open('info.txt', 'r') # открываем файл с именем info.txt для чтения 
							# работаем с содержимым файла info.txt 
file.close()                 # закрываем файл после окончания работы
```
Чтобы проверить открыт файл или закрыт можно использовать файловое свойство (атрибут) `closed`.
```python
file1 = open('students.txt', 'w') 
file2 = open('customers.txt', 'w') 
file1.close() 
print(file1.closed) 
print(file2.closed) 
file2.close()
>>> True 
>>> False
```
Обратите внимание на то, что при вызове метода мы используем скобки: `close()`, а при вызове свойства (атрибута) скобок нет `closed`. Методы совершают действия, а свойства возвращают информацию об объекте
## Чтение содержимого файла
Как уже сказано, при открытии файла с помощью функции `open()` в файловую переменную попадает не содержимое файла, а ссылка на файл (дескриптор файла).
```python
file = open('info.txt', 'w', encoding='utf-8') # открываем файл для записи 
print(file)
>>> <_io.TextIOWrapper name='info.txt' mode='w' encoding='utf-8'>
```
Для чтения содержимого открытого для чтения файла используются три файловых метода:
- `read()` – читает все содержимое файла;
- `readline()` – читает одну строку из файла;
- `readlines()` – читает все содержимое файла и возвращает список строк.

Предположим, в папке с исполняемой программой есть текстовый файл `languages.txt` с содержимым:
```python
Python 
Java 
Javascript 
C# 
C 
C++ 
PHP 
R 
Objective-C
```
### Метод read()
Файловый метод `read()` считывает все содержимое из файла и возвращает строку, которая может содержать символы перехода на новую строку `'\n'`.
```python
file = open('languages.txt', 'r', encoding='utf-8') 
content = file.read() 
file.close()
```
считывает содержимое файла `languages.txt` в переменную `content`. В переменной `content` будет содержаться строка `'Python\nJava\nJavascript\nC#\nC\nC++\nPHP\nR\nObjective-C'`.

Таким образом, метод `read()` считывает все содержимое файла, **включая переносы строк**:

Если методу `read()` передать целочисленный параметр, то будет считано не более заданного количества символов. Например, считывать файл посимвольно можно при помощи метода `read(1)`.
### Метод readline()
Файловый метод `readline()` считывает одну строку из файла (до символа конца строки `'\n'`), при этом возвращается считанная строка вместе с символом `'\n'`. Если считать строку не удалось – достигнут конец файла и больше строк в нем нет, возвращается пустая строка.
```python
file = open('languages.txt', 'r', encoding='utf-8') 
language = file.readline() 
file.close()
```
считывает содержимое первой строки файла `languages.txt` в переменную `language`. В переменной `language` будет содержаться строка `'Python\n'`.

Для удаления символа `'\n'` из конца считанной строки удобно использовать строковый метод `rstrip()`.
```python
line = 'Python\n' 
line = line.rstrip()
```
Прочитать содержимое всего файла построчно можно двумя способами.
```python
while

file = open('languages.txt', 'r', encoding='utf-8') 
line = file.readline() # считываем первую строку
while line != '': # пока не конец файла 
	print(line.strip()) # обрабатываем считанную строку 
	line = file.readline() # читаем новую строку 
file.close()
```
```python
`for` **(предпочтительный вариант):**

file = open('languages.txt', 'r', encoding='utf-8') 
for line in file: 
	print(line.strip()) 
file.close()
```
Метод `readline()` довольно удобен, когда мы хотим управлять процессом чтения из файла, особенно если файл очень большой и его полное считывание может привести к нехватке памяти.
### Метод readlines()
Файловый метод `readlines()` считывает все строки из файла и возвращает список из всех считанных строк (одна строка — один элемент списка). При этом, каждая строка в списке заканчивается символом переноса строки  `'\n'`
```python
file = open('languages.txt', 'r', encoding='utf-8') 
languages = file.readlines() 
file.close()

>>> ['Python\n', 'Java\n', 'Javascript\n', 'C#\n', 'C\n', 'C++\n', 'PHP\n', 'R\n', 'Objective-C']
```
Чтобы удалить символ `'\n'` можно использовать списочное выражение:
```python
languages = [line.strip() for line in file.readlines()]
```
либо функцию `map()`
```python
languages = list(map(str.strip, file.readlines()))
```
либо анонимную функцию:
```python
languages = list(map(lambda line: line.strip(), file.readlines()))
```
Если передать в функцию `list()` ссылку на файловый объект `list(file)` , получим тот же результат, что при вызове метода `file.readlines()`.


