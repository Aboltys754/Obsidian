
```python
pip install fastapi
pip install "uvicorn[standard]"
```
"Стандартная" опция устанавливает зависимости на основе [Cython](https://cython.org/), такие, как `uvloop`, `httptools` и `websockets`. Если вы хотите установить и использовать полноценный сервер uvicorn, вам следует запустить команду `pip install uvicorn`. Установленный `uvicorn` представляет собой сервер на базе `ASGI`, на котором будут запускаться ваши приложения FastAPI. Сервер интерфейса асинхронного серверного шлюза (`ASGI`), который использует FastAPI, делает его самой быстрой платформой Python на момент написания. Сервер `uvicorn` может запускать как синхронные, так и асинхронные сервисы.

Также мы можем установить FastAPI вместе с сервером Uvicorn используя одну команду `pip install "fastapi[standard]"`, но в результате будет установлено много лишних зависимостей, которые мы пока не будем использовать.


## Запуск

Создайте файл `api.py` в корне вашего проекта. Этот файл будет содержать основной код нашего FastAPI-приложения.
И добавьте в него новый экземпляр класса FastAPI следующим образом:

```java
from fastapi import FastAPI

app = FastAPI()
```

**В этом коде мы**:

- Импортируем класс FastAPI из модуля `fastapi`.
- Создаём экземпляр приложения с именем `app`. Это основа нашего API.
- Имя `app` можно заменить на любое допустимое имя переменной Python, например, `main_app` или `myapp`.

Экземпляр FastAPI предоставляет функциональность для работы с маршрутами, middleware, обработчиками исключений и операциями пути. Он используется как декоратор `@app` для определения эндпоинтов.

## Создание первого маршрута

Маршруты в FastAPI определяют, как приложение обрабатывает HTTP-запросы. Для этого используются декораторы, такие как `@app.get()`, `@app.post()`, `@app.put()`, `@app.delete()` и другие, соответствующие методам HTTP (GET, POST, PUT, DELETE, PATCH, HEAD, TRACE, OPTIONS).

Теперь создадим маршрут для обработки GET-запросов по пути `/`, который возвращает приветственное сообщение:

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
async def welcome() -> dict:
    return {"message": "Hello, FastAPI!"}
```

**В этом коде**:

- **Декоратор** `@app.get("/")`: Указывает, что функция `welcome()` обрабатывает GET-запросы по пути /.
- **Асинхронность**: Используем `async def`, чтобы функция работала асинхронно, что обеспечивает высокую производительность.
- **Аннотация возвращаемого типа**: -> `dict` указывает, что функция возвращает словарь, что помогает FastAPI генерировать точную документацию.
- **Ответ**: Возвращается JSON-объект `{"message": "Hello, FastAPI!"}`.

FastAPI автоматически преобразует возвращаемый словарь в JSON-ответ, соответствующий стандарту REST.

  
Следующим шагом будет запуск нашего приложения с помощью сервера приложений (ASGI application server) Uvicorn. Для этого в терминале выполним следующую команду:

```bash
uvicorn api:app --port 8000 --reload
```

В этой команде Uvicorn принимает следующие аргументы:

- **`api:app`** - указывает, где находится приложение:  
    `api` - имя файла без расширения `.py`,  
    `app` - имя переменной, содержащей экземпляр FastAPI.
    
- **`--port 8000`** - задаёт порт, который будет слушать сервер.
    
- **`--reload`** - включает автоматическую перезагрузку при изменении кода (используется только в режиме разработки).
    

  
Эта команда вернет нам следующий вывод:

```scss
(.venv) permin0ff@Mac hello_world % uvicorn api:app --port 8000 --reload
INFO:     Will watch for changes in these directories: ['/Users/permin0ff/PycharmProjects/FastAPI_course_1/hello_world/']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [47970] using WatchFiles
INFO:     Started server process [47972]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

Вывод выше, показывает, что `uvicorn` использует адрес `http://127.0.0.1` для запуска приложения с портом по умолчанию `8000`. Мы можем получить доступ к нашей странице через [http://127.0.0.1:8000](http://127.0.0.1:8000/). А для того, чтобы остановить сервер, вам просто нужно нажать клавиши клавиатуры Ctrl+C.

  
Теперь мы можем перейти по адресу [http://127.0.0.1:8000](http://127.0.0.1:8000/) и посмотреть наше запущенное приложение: